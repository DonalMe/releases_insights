{% extends 'base.html.twig' %}

{% block header %}
  <header class="mx-auto">
    <h1>
      <a href="?version={{ release -1 }}">«</a>
      &nbsp;Firefox&nbsp;{{ release }}&nbsp;
      <a href="?version={{ release +1 }}">»</a>
    </h1>
      {% if release != constant('FIREFOX_RELEASE') %}
        <a href="?version={{ constant('FIREFOX_RELEASE')|number_format }}"
      class="btn btn-primary">Go to current release</a>
      {% else %}
        <div class="w-25 alert alert-primary mx-auto" role="alert">This is the version currently shipping to end-users</div>
      {% endif %}
  </header>
{% endblock %}

{% block main %}
  <table class="table table-striped table-bordered table-sm w-50 justify-content-center">
    <tr>
      <th class=" w-25">Release Date</th><td>{{ release_date|format_datetime('long', 'none', locale='en') }}  (<i>{{ release_date }}</i>)</td>
    </tr>
    <tr>
      <th>Beta cycle length</th><td>{{ beta_cycle_length|number_format }} weeks</td>
    </tr>
    <tr>
      <th>Nightly cycle length</th><td>{{ nightly_cycle_length|number_format }} weeks</td>
    </tr>
    {% if release > 57 %}
    <tr>
      <th>Bugs fixed in nightly</th><td>{{ nightly_fixes.total|length }}</td>
    </tr>
    {% endif %}

    {% if beta_uplifts %}
    <tr>
      <th>Uplifts in <a href="{{ beta_changelog }}">Beta</a></th><td><a href="{{ beta_uplifts_url }}">{{ beta_uplifts.total|length }}</a> ({{ beta_uplifts.backouts|length }} backout{{ beta_uplifts.backouts|length != 1 ? 's' }})</td>
    </tr>
    {% else %}
    <tr>
      <th>Uplifts in Beta</th><td>Data cannot be extracted from mercurial (missing HG tag for beta)</td>
    </tr>
    {% endif %}

    <tr>
      <th>Uplifts in <a href="{{ rc_changelog }}">RC</a></th><td><a href="{{ rc_uplifts_url }}">{{ rc_uplifts.total|length }}</a> ({{ rc_uplifts.backouts|length }} backout{{ rc_uplifts.backouts|length != 1 ? 's' }})</td>
    </tr>
    <tr>
      <th>Total number of uplifts</th><td>{{ beta_uplifts.total|length + rc_uplifts.total|length}}</td>
    </tr>
    <tr>
      <th>Betas</th><td>{{ beta_count }}</td>
    </tr>
    <tr>
      <th>Release Candidates</th><td>{{ rc_count }}</td>
    </tr>
    <tr>
      <th>Dot releases</th><td>{{ dot_release_count }}</td>
    </tr>
    </table>

  <p>{{ fallback_content | raw}}</p>

{% endblock %}

{% block footer %}
  <footer></footer>
{% endblock %}
