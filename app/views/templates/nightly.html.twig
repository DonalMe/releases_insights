{% extends 'base.html.twig' %}

{% block header %}
  <header>
    <h1>
      <a href="?date={{ previous_date }}">«</a>
      &nbsp;{{ display_date  }}&nbsp;
      {% if requested_date != today %}<a href="?date={{ next_date }}">»</a>{% endif %}
    </h1>
  </header>
{% endblock %}
{% block main %}
   <ul>
{% for dataset in nightly_pairs %}
    <li class="header">
        <a href="https://hg.mozilla.org/mozilla-central/changeset/{{ dataset.changeset }}">{{  dataset.buildid }}</a>
        <a href="https://hg.mozilla.org/mozilla-central/pushloghtml?fromchange={{  dataset.prev_changeset }}&tochange={{  dataset.changeset }}">Changelog</a>
        <a href="{{ bug_list[dataset.buildid].url }}">Patches from {{ bug_list[dataset.buildid].count }} bugs</a>
        <a href="https://crash-stats.mozilla.com/api/SuperSearch/?build_id={{  dataset.buildid }}&_facets=signature&product=Firefox">{{build_crashes[dataset.buildid] }} crashes</a>
        <ol>
        {% for sig in top_sigs[dataset.buildid] %}
            <li><a href="https://crash-stop-addon.herokuapp.com/sumup.html?s={{ sig.term }}">{{ sig.term }}</a> <b title="{{ sig.count }}">({{ ((sig.count/build_crashes[dataset.buildid])*100)|number_format(2) }}%)</b></li>
        {% endfor %}
        </ol>
    </li>
{% else %}
<p>No Nightly build released yet today</p>
{% endfor %}
</ul>
{% endblock %}

{% block footer %}
  <footer></footer>
{% endblock %}
